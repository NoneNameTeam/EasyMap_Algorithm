cmake_minimum_required(VERSION 3.20.0)

# è®¾ç½®å·¥å…·é“¾ - ä½¿ç”¨ä½ çš„ç¡®åˆ‡è·¯å¾„
set(CMAKE_TOOLCHAIN_FILE "C:/vcpkgpack/vcpkg-master/vcpkg_m/scripts/buildsystems/vcpkg.cmake")
set(VCPKG_TARGET_TRIPLET "x64-windows-static")

project(Astar)

set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

# è¯¦ç»†è°ƒè¯•ä¿¡æ¯
message(STATUS "=== CMake é…ç½®è°ƒè¯•ä¿¡æ¯ ===")
message(STATUS "1. å·¥å…·é“¾æ–‡ä»¶: ${CMAKE_TOOLCHAIN_FILE}")
message(STATUS "2. ç›®æ ‡å¹³å°: ${VCPKG_TARGET_TRIPLET}")
message(STATUS "3. é¡¹ç›®åç§°: ${PROJECT_NAME}")

# å¼ºåˆ¶è®¾ç½®æœç´¢è·¯å¾„
set(CMAKE_PREFIX_PATH 
    "C:/vcpkgpack/vcpkg-master/vcpkg_m/installed/x64-windows-static"
    "C:/vcpkgpack/vcpkg-master/vcpkg_m/installed/x64-windows"
)

message(STATUS "4. CMAKE_PREFIX_PATH: ${CMAKE_PREFIX_PATH}")

# æ‰‹åŠ¨è®¾ç½®æ¨¡å—è·¯å¾„
set(CMAKE_MODULE_PATH 
    "C:/vcpkgpack/vcpkg-master/vcpkg_m/installed/x64-windows-static/share/cpprestsdk"
    "C:/vcpkgpack/vcpkg-master/vcpkg_m/installed/x64-windows/share/cpprestsdk"
)

message(STATUS "5. CMAKE_MODULE_PATH: ${CMAKE_MODULE_PATH}")

# æŸ¥æ‰¾åŒ…
find_package(cpprestsdk REQUIRED)
message(STATUS "6. cpprestsdk åŒ…æŸ¥æ‰¾æˆåŠŸ")

add_executable(Astar Astar.cpp)
message(STATUS "7. å¯æ‰§è¡Œæ–‡ä»¶ç›®æ ‡åˆ›å»ºæˆåŠŸ")

target_link_libraries(Astar PRIVATE cpprestsdk::cpprest)
message(STATUS "8. åº“é“¾æ¥æˆåŠŸ")

message(STATUS "ğŸ‰ æ‰€æœ‰é…ç½®æ­¥éª¤å®Œæˆ!")